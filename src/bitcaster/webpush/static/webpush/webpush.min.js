$(function(){var WebPushClient;fetch(location.href+"data/",{method:"GET"}).then(response=>response.json()).then(data=>{var serviceWorkerPath=data.w;var serverKey=data.k;var subscribeUrl=data.s;var unSubscribeUrl=data.u;if(WebPushClientFactory.isSupported()){WebPushClientFactory.create({serviceWorkerPath:serviceWorkerPath,serverKey:serverKey,subscribeUrl:subscribeUrl}).then(Client=>{WebPushClient=Client;if(WebPushClient.permissionStatus==="denied"){$("#permissionDenied").show()}if(WebPushClient.permissionStatus==="granted"){$("#supported").show()}})}else{$("#unsupported").show();$("#supported").hide()}$("#subscribe").on("click",function(){WebPushClient.subscribe().then(c=>location.reload())});$("#deny").on("click",function(){fetch(unSubscribeUrl,{method:"POST"}).then(function(){location.reload()})})})});
